<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Database</title>	

	</head>



	<body>

            <table>
                        <tr><td>PDB Code</td><td>Resolution(A)</td><td>Chain</td><td>Processed?</td><td>View</td></tr>

                        {% for structure in structures %}
                        <tr>
                                <td> {{ structure.pdbCode }}</td>
                                <td> {{ structure.resolution }}</td>                                
                                <td> {{ structure.Chain }}</td> 
                                <td> {{ structure.Processed }}</td>
                                <td> {% for TMProtein in structure.tmprotein_set.all %}
                                    
                                <a href="{% url 'tmprotein' TMProtein.id %}">{{ TMProtein.TMProtein_ID }}</a>
                                    {% endfor %}
                                </td>
                                
                        </tr> 
                                {% endfor %}
            </table>
                <!-- dodac tu link do viewera -->
                <!-- powinno to byc tabela tak jak w helix.html tylko interaktywna -->
		<!-- Upload form. Note enctype attribute! -->
		<form action="{% url "database" database_model_i.id %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
			<!-- button for upload -->
			<table>
			{% if structures %}

            <tr><input type="submit" name="Clear" value="Clear" /></tr>
            <tr>
            <td><input type="submit" name="CalculateSingleHelixStats" value="CalculateSingleHelixStats" /></td>
            <td><input type="submit" name="CalculateHelixPairStats" value="CalculateHelixPairStats" /></td>
            <td><input type="submit" name="CalculateHelixTripletStats" value="CalculateHelixTripletStats" /></td>
            </tr>

            
            <td></td>
            <td><input type="submit" name="ExtractHelixPairs" value="ExtractHelixPairs" /></td>
            <tr>
                        <td>Consecutive?<input type='checkbox' name="checkbox" value="checkbox"></td>
                        <td>And Interacting?<input type='checkbox' name="checkbox" value="checkbox"></td>

            </tr>

            <tr><td></td></tr>
            <td><input type="submit" name="ExtractInteractingHelixPairs" value="ExtractInteractingHelixPairs" /></td>
            <tr>
            <td></td>
            <td>
            <input type="submit" name="ExtractHelixTriplets" value="ExtractHelixTriplets" />
            </td>
            <td</td>
            </tr>
            <tr>
                        <td>Consecutive?<input type='checkbox' name="checkbox" value="checkbox"></td>
                        <td>And Interacting?<input type='checkbox' name="checkbox" value="checkbox"></td>
                        <td>And Closed?<input type='checkbox' name="checkbox" value="checkbox"></td>

            </tr>
            <p><input type='checkbox' name="checkbox" value="checkbox"></p></td>
            <td><input type="submit" name="ExtractInteractingHelixTriplets" value="ExtractInteractingHelixTriplets" /></td>

            </tr>
            <tr>
            <td><input type="submit" name="CalculateAminoAcidZPreferenceHistogram" value="CalculateAminoAcidZPreferenceHistogram" /></td>
            <td><input type="submit" name="ClusterHelixTripletsByRMSD" value="ClusterHelixTripletsByRMSD" />
            <p>With Permutation?<input type='checkbox' name="perm_checkbox" value="perm_checkbox"></p>
            <p>With Flip?<input type='checkbox' name="checkbox" value="With Flip?"></p></td>
            <p>CAs?<input type='checkbox' name="checkbox" value="With Permutation?"></p>
            <p>MCs?<input type='checkbox' name="checkbox" value="With Flip?"></p></td>
                        
            <td><input type="submit" name="ClusterHelixTripletsByRMSD" value="AminoAcidPreferencesForPackings" /></td>
            <td><input type="submit" name="ClusterHelixTripletsByRMSD" value="SolventAccessibility" /></td>

            </tr>
            <tr>
            <td><input type="submit" name="DownloadResults" value="DownloadResults" /></td>
            </tr>
<!--            </table> -->
<!--        </form> -->



			{% endif %}
			
			<p>{{ form.non_field_errors }}</p>
            <p>{{ form.tmproteinfile.label_tag }} {{ form.tmproteinfile.help_text }}</p>
            <p>
                {{ form.tmproteinfile.errors }}
                {{ form.tmproteinfile }}
            </p>
            <p>Experimental?</p>
            <p><input type='checkbox' name="checkbox" value="checkbox"></p>
            <p><input type="submit" name="UploadProteinFile" value="UploadProteinFile" /><input type="submit" name ="UploadXLSFile"  value="UploadXLSFile" /></p>  
            <!-- button for upload -->

			<tr>
			<td><input type="submit" name="Update" value="Update" /></td>
			<td><input type="submit" name="Download" value="Download PDBs" /></td>
			<td><input type="submit" name="Clear" value="Clear" /></td>
            <td><input type="submit" name="Process" value="Process" /></td>

			</tr>
            </table>
            
            <p>Clusterings:</p>
            {% for clustering in clusterings %}
            
            <p>         {{clustering.pk}} <br>
                        {{clustering.idx}} <br>
                        {{clustering.no_cluster}} <br>
                        {{clustering.RMSD}} <br> 
                        <a href="{% url 'clustering' clustering.id %}">{{ clustering.id }}</a>
            </p>
            
            {% endfor %}
		</form>
        <!-- prawdopodobnie bede chcial to podzielic na kilka formow -->
        <!-- powininienem to zlaczyc w jeden template z database ... -->
        <!-- wtedy bedzie mniej robienia -->
        <form action="{% url "list" %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <table>
            <tr>
            <td>
            </td>
            </tr>
            </table>
        </form>
		
	</body>

</html> 


